<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TAROT - ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏û‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect x='12' y='6' width='40' height='52' rx='4' fill='%235C4D3D'/%3E%3Crect x='16' y='10' width='32' height='44' rx='2' fill='none' stroke='%238B7765' stroke-width='1'/%3E%3Cpath d='M32 18 L34.5 26 L43 26 L36.5 31 L39 40 L32 35 L25 40 L27.5 31 L21 26 L29.5 26 Z' fill='%23D4C8BB'/%3E%3Ccircle cx='32' cy='46' r='2' fill='%23B5A393'/%3E%3C/svg%3E">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,400&family=Noto+Sans+Thai:wght@300;400;500;600&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header>
      <div class="header-line"></div>
      <h1>TAROT</h1>
      <p class="subtitle">‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏û‡πà ¬∑ ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</p>
      <div class="header-line"></div>
      <div class="reading-counter">
        <span class="counter-text">‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏û‡πà‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß </span>
        <span class="counter-number" id="readingCounter">-</span>
        <span class="counter-text"> ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</span>
      </div>
    </header>

    <div class="content">
      <!-- Step 1: Choose Spread -->
      <div id="step1" class="step active">
        <div class="section-box">
          <div class="decorative-icon">‚ú¶</div>
          <h2 class="section-title">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏ö‡πÑ‡∏û‡πà</h2>
          <p class="instruction">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÑ‡∏û‡πà‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î</p>

          <div class="spread-options">
            <div class="spread-option" onclick="selectSpread(1)">
              <div class="spread-info">
                <div class="spread-name">Card of the Day</div>
                <div class="spread-desc">‡πÑ‡∏û‡πà‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</div>
                <div class="spread-plays" id="plays-1">‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß - ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</div>
              </div>
              <div class="spread-count">1</div>
            </div>
            <div class="spread-option" onclick="selectSpread(2)">
              <div class="spread-info">
                <div class="spread-name">Two Cards</div>
                <div class="spread-desc">‡∏à‡∏±‡∏ö‡πÑ‡∏û‡πà 2 ‡πÉ‡∏ö</div>
                <div class="spread-plays" id="plays-2">‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß - ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</div>
              </div>
              <div class="spread-count">2</div>
            </div>
            <div class="spread-option" onclick="selectSpread(3)">
              <div class="spread-info">
                <div class="spread-name">Timeline</div>
                <div class="spread-desc">‡∏≠‡∏î‡∏µ‡∏ï ¬∑ ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô ¬∑ ‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï</div>
                <div class="spread-plays" id="plays-3">‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß - ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</div>
              </div>
              <div class="spread-count">3</div>
            </div>
            <div class="spread-option" onclick="selectSpread(4)">
              <div class="spread-info">
                <div class="spread-name">Pyramid</div>
                <div class="spread-desc">‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÅ‡∏•‡∏∞‡∏ó‡∏≤‡∏á‡∏≠‡∏≠‡∏Å</div>
                <div class="spread-plays" id="plays-4">‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß - ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</div>
              </div>
              <div class="spread-count">4</div>
            </div>
            <div class="spread-option" onclick="selectSpread(10)">
              <div class="spread-info">
                <div class="spread-name">Celtic Cross</div>
                <div class="spread-desc">‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏ä‡∏¥‡∏á‡∏•‡∏∂‡∏Å</div>
                <div class="spread-plays" id="plays-10">‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß - ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</div>
              </div>
              <div class="spread-count">10</div>
            </div>
            <div class="spread-option" onclick="selectSpread(12)">
              <div class="spread-info">
                <div class="spread-name">Year Ahead</div>
                <div class="spread-desc">‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏°.‡∏Ñ. - ‡∏ò.‡∏Ñ.</div>
                <div class="spread-plays" id="plays-12">‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß - ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</div>
              </div>
              <div class="spread-count">12</div>
            </div>
          </div>
        </div>
        <div class="footer-decor">
          <span class="decor-line"></span>
          <span class="decor-dot">‚óÜ</span>
          <span class="decor-line"></span>
        </div>
      </div>

      <!-- Step 2: Question (Optional) -->
      <div id="step2" class="step">
        <button class="btn-back" onclick="goBackToStep1()">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
          ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö
        </button>
        <div class="section-box">
          <div class="decorative-icon">‚ú¶</div>
          <h2 class="section-title">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏ô‡πÉ‡∏à</h2>
          <p class="instruction">
            ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö<br>
            ‡πÑ‡∏û‡πà‡∏à‡∏∞‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏õ‡∏™‡∏π‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏£‡∏∞‡∏à‡πà‡∏≤‡∏á
          </p>
          <textarea id="questionInput" placeholder="‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..." rows="3"></textarea>
          <p class="optional-hint">* ‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Å‡πá‡πÑ‡∏î‡πâ</p>
          <button class="btn" onclick="goToStep3()">‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏û‡πà</button>
        </div>
        <div class="footer-decor">
          <span class="decor-line"></span>
          <span class="decor-dot">‚óÜ</span>
          <span class="decor-line"></span>
        </div>
      </div>

      <!-- Step 3: Card Selection -->
      <div id="step3" class="step">
        <button class="btn-back" onclick="goBackToStep2()">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
          ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö
        </button>
        <div class="selection-header">
          <p class="question-display" id="questionDisplay"></p>
          <div class="selected-count" id="selectedCount">0 / 3</div>
          <p class="selection-hint">‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ¬∑ ‡πÅ‡∏ï‡∏∞‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</p>
          <div class="selected-preview" id="selectedPreview"></div>
        </div>

        <div class="card-spread" id="cardSpread"></div>
        <div class="card-grid-mobile" id="cardGridMobile">
          <div class="grid-container" id="gridContainer"></div>
        </div>
      </div>

      <!-- Step 4: Results -->
      <div id="step4" class="step">
        <div class="result-container" id="resultContainer">
          <div class="result-header">
            <p class="result-question" id="questionDisplayResult"></p>
            <p class="result-title">‡πÑ‡∏û‡πà‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
          </div>
          <div class="result-cards" id="resultCards"></div>
          <div class="result-footer">
            <p class="result-footer-text">TAROT ¬∑ ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏à ¬∑ ‡∏£‡∏±‡∏ö‡∏ü‡∏±‡∏á ¬∑ ‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö</p>
          </div>
        </div>

        <!-- AI Prediction Result -->
        <div id="aiPredictionSection" class="ai-prediction-section" style="display: none;">
          <div class="ai-prediction-container">
            <div class="ai-header">
              <div class="ai-icon">‚ú®</div>
              <h3 class="ai-title">‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏´‡∏°‡∏≠‡∏î‡∏π AI</h3>
            </div>
            <div id="aiPredictionContent" class="ai-content"></div>
          </div>
        </div>

        <!-- AI Loading -->
        <div id="aiLoadingSection" class="ai-loading-section" style="display: none;">
          <div class="ai-loading-container">
            <div class="crystal-ball">
              <div class="crystal-shine"></div>
              <div class="crystal-glow"></div>
            </div>
            <p class="loading-text">‡∏´‡∏°‡∏≠‡∏î‡∏π‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏û‡πà...</p>
          </div>
        </div>

        <!-- AI Error -->
        <div id="aiErrorSection" class="ai-error-section" style="display: none;">
          <div class="ai-error-container">
            <div class="error-icon">üåô</div>
            <h3 class="error-title">‡∏´‡∏°‡∏≠‡∏î‡∏π‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô</h3>
            <p class="error-message">‡∏û‡∏•‡∏±‡∏á‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏•‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°<br>‡πÇ‡∏õ‡∏£‡∏î‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÉ‡∏ô‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á</p>
            <button class="btn btn-outline" onclick="retryAIPrediction()">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="width: 18px; height: 18px; display: inline-block; vertical-align: middle; margin-right: 8px;">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
              </svg>
              ‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
            </button>
          </div>
        </div>

        <div class="button-group">
          <button class="btn btn-ai" id="aiPredictBtn" onclick="getAIPrediction()" style="display: none;">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
            </svg>
            ‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡πÇ‡∏î‡∏¢ AI
          </button>
          <button class="btn btn-save" onclick="saveImage()">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
            ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ
          </button>
          <button class="btn btn-outline" onclick="restart()">‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏û‡πà‡πÉ‡∏´‡∏°‡πà</button>
        </div>
      </div>
    </div>

    <footer>
      <p class="footer-text">‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏à ¬∑ ‡∏£‡∏±‡∏ö‡∏ü‡∏±‡∏á ¬∑ ‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö</p>
      <p class="version-text" id="versionInfo" style="font-size: 11px; color: rgba(92, 77, 61, 0.5); margin-top: 8px;">v1.0.0</p>
    </footer>
  </div>

  <script src="version.js"></script>
  <script src="script.js"></script>
  <script src="ai_functions.js"></script>
  <script>
    // Display version
    if (typeof APP_VERSION !== 'undefined') {
      document.getElementById('versionInfo').textContent = `v${APP_VERSION} ‚Ä¢ Updated: ${LAST_UPDATED}`;
    }
  </script>
  <script>
    // Override showResults to update AI button visibility
    const originalGoToStep4 = goToStep4;
    goToStep4 = function() {
      originalGoToStep4();
      setTimeout(() => {
        updateAIButtonVisibility();
        // Reset AI sections
        document.getElementById('aiPredictionSection').style.display = 'none';
        document.getElementById('aiLoadingSection').style.display = 'none';
        document.getElementById('aiErrorSection').style.display = 'none';
      }, 100);
    };
  </script>
</body>
</html>
